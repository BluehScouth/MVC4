/*
Deployment script for MBSoftware

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "MBSoftware"
:setvar DefaultFilePrefix "MBSoftware"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [master];


GO

IF (DB_ID(N'$(DatabaseName)') IS NOT NULL) 
BEGIN
    ALTER DATABASE [$(DatabaseName)]
    SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
    DROP DATABASE [$(DatabaseName)];
END

GO
PRINT N'Creating $(DatabaseName)...'
GO
CREATE DATABASE [$(DatabaseName)]
    ON 
    PRIMARY(NAME = [$(DatabaseName)], FILENAME = N'$(DefaultDataPath)$(DefaultFilePrefix)_Primary.mdf')
    LOG ON (NAME = [$(DatabaseName)_log], FILENAME = N'$(DefaultLogPath)$(DefaultFilePrefix)_Primary.ldf') COLLATE SQL_Latin1_General_CP1_CI_AS
GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ANSI_NULLS ON,
                ANSI_PADDING ON,
                ANSI_WARNINGS ON,
                ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                NUMERIC_ROUNDABORT OFF,
                QUOTED_IDENTIFIER ON,
                ANSI_NULL_DEFAULT ON,
                CURSOR_DEFAULT LOCAL,
                RECOVERY FULL,
                CURSOR_CLOSE_ON_COMMIT OFF,
                AUTO_CREATE_STATISTICS ON,
                AUTO_SHRINK OFF,
                AUTO_UPDATE_STATISTICS ON,
                RECURSIVE_TRIGGERS OFF 
            WITH ROLLBACK IMMEDIATE;
        ALTER DATABASE [$(DatabaseName)]
            SET AUTO_CLOSE OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ALLOW_SNAPSHOT_ISOLATION OFF;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET READ_COMMITTED_SNAPSHOT OFF;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET AUTO_UPDATE_STATISTICS_ASYNC OFF,
                PAGE_VERIFY NONE,
                DATE_CORRELATION_OPTIMIZATION OFF,
                DISABLE_BROKER,
                PARAMETERIZATION SIMPLE,
                SUPPLEMENTAL_LOGGING OFF 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF IS_SRVROLEMEMBER(N'sysadmin') = 1
    BEGIN
        IF EXISTS (SELECT 1
                   FROM   [master].[dbo].[sysdatabases]
                   WHERE  [name] = N'$(DatabaseName)')
            BEGIN
                EXECUTE sp_executesql N'ALTER DATABASE [$(DatabaseName)]
    SET TRUSTWORTHY OFF,
        DB_CHAINING OFF 
    WITH ROLLBACK IMMEDIATE';
            END
    END
ELSE
    BEGIN
        PRINT N'The database settings cannot be modified. You must be a SysAdmin to apply these settings.';
    END


GO
IF IS_SRVROLEMEMBER(N'sysadmin') = 1
    BEGIN
        IF EXISTS (SELECT 1
                   FROM   [master].[dbo].[sysdatabases]
                   WHERE  [name] = N'$(DatabaseName)')
            BEGIN
                EXECUTE sp_executesql N'ALTER DATABASE [$(DatabaseName)]
    SET HONOR_BROKER_PRIORITY OFF 
    WITH ROLLBACK IMMEDIATE';
            END
    END
ELSE
    BEGIN
        PRINT N'The database settings cannot be modified. You must be a SysAdmin to apply these settings.';
    END


GO
USE [$(DatabaseName)];


GO
IF fulltextserviceproperty(N'IsFulltextInstalled') = 1
    EXECUTE sp_fulltext_database 'enable';


GO
PRINT N'Creating [dbo].[Cliente]...';


GO
CREATE TABLE [dbo].[Cliente] (
    [ClienteId]            BIGINT         IDENTITY (1, 1) NOT NULL,
    [Nombre]               NVARCHAR (100) NULL,
    [Apellidos]            NVARCHAR (100) NULL,
    [Email]                NVARCHAR (100) NULL,
    [Telefono]             NVARCHAR (100) NULL,
    [Direccion]            NVARCHAR (500) NULL,
    [CodigoPais]           NVARCHAR (50)  NULL,
    [CodigoDocumento]      NVARCHAR (50)  NULL,
    [NumeroDocumento]      NVARCHAR (50)  NULL,
    [EstadoRegistro]       CHAR (1)       NULL,
    [UsuarioCreacion]      NVARCHAR (50)  NULL,
    [FechaCreacion]        DATETIME       NULL,
    [TerminalCreacion]     NVARCHAR (50)  NULL,
    [UsuarioModificacion]  NVARCHAR (50)  NULL,
    [FechaModificacion]    DATETIME       NULL,
    [TerminalModificacion] NVARCHAR (50)  NULL,
    PRIMARY KEY CLUSTERED ([ClienteId] ASC)
);


GO
PRINT N'Creating [dbo].[Parametro]...';


GO
CREATE TABLE [dbo].[Parametro] (
    [CodigoParametro]      INT            NOT NULL,
    [Nombre]               NVARCHAR (100) NULL,
    [Descripcion]          NVARCHAR (255) NULL,
    [EstadoRegistro]       CHAR (1)       NULL,
    [UsuarioCreacion]      NVARCHAR (50)  NULL,
    [FechaCreacion]        DATETIME       NULL,
    [TerminalCreacion]     NVARCHAR (50)  NULL,
    [UsuarioModificacion]  NVARCHAR (50)  NULL,
    [FechaModificacion]    DATETIME       NULL,
    [TerminalModificacion] NVARCHAR (50)  NULL,
    PRIMARY KEY CLUSTERED ([CodigoParametro] ASC)
);


GO
PRINT N'Creating [Dbo].[ParametroSeccion]...';


GO
CREATE TABLE [Dbo].[ParametroSeccion] (
    [CodigoParametro]      INT            NOT NULL,
    [CodigoSeccion]        INT            NOT NULL,
    [Nombre]               NVARCHAR (100) NULL,
    [SoloLectura]          BIT            NULL,
    [EstadoRegistro]       CHAR (1)       NULL,
    [UsuarioCreacion]      NVARCHAR (50)  NULL,
    [FechaCreacion]        DATETIME       NULL,
    [TerminalCreacion]     NVARCHAR (50)  NULL,
    [UsuarioModificacion]  NVARCHAR (50)  NULL,
    [FechaModificacion]    DATETIME       NULL,
    [TerminalModificacion] NVARCHAR (50)  NULL,
    PRIMARY KEY CLUSTERED ([CodigoParametro] ASC, [CodigoSeccion] ASC)
);


GO
PRINT N'Creating [dbo].[ParametroValor]...';


GO
CREATE TABLE [dbo].[ParametroValor] (
    [CodigoParametro]      INT            NOT NULL,
    [CodigoSeccion]        INT            NOT NULL,
    [CodigoValor]          INT            NOT NULL,
    [Valor]                NVARCHAR (MAX) NULL,
    [EstadoRegistro]       CHAR (1)       NULL,
    [UsuarioCreacion]      NVARCHAR (50)  NULL,
    [FechaCreacion]        DATETIME       NULL,
    [TerminalCreacion]     NVARCHAR (50)  NULL,
    [UsuarioModificacion]  NVARCHAR (50)  NULL,
    [FechaModificacion]    DATETIME       NULL,
    [TerminalModificacion] NVARCHAR (50)  NULL
);


GO
PRINT N'Creating Default Constraint on [dbo].[Cliente]....';


GO
ALTER TABLE [dbo].[Cliente]
    ADD DEFAULT 'A' FOR [EstadoRegistro];


GO
PRINT N'Creating Default Constraint on [dbo].[Cliente]....';


GO
ALTER TABLE [dbo].[Cliente]
    ADD DEFAULT GETDATE() FOR [FechaCreacion];


GO
PRINT N'Creating Default Constraint on [dbo].[Parametro]....';


GO
ALTER TABLE [dbo].[Parametro]
    ADD DEFAULT 'A' FOR [EstadoRegistro];


GO
PRINT N'Creating Default Constraint on [dbo].[Parametro]....';


GO
ALTER TABLE [dbo].[Parametro]
    ADD DEFAULT GETDATE() FOR [FechaCreacion];


GO
PRINT N'Creating Default Constraint on [Dbo].[ParametroSeccion]....';


GO
ALTER TABLE [Dbo].[ParametroSeccion]
    ADD DEFAULT 'A' FOR [EstadoRegistro];


GO
PRINT N'Creating Default Constraint on [Dbo].[ParametroSeccion]....';


GO
ALTER TABLE [Dbo].[ParametroSeccion]
    ADD DEFAULT GETDATE() FOR [FechaCreacion];


GO
PRINT N'Creating Default Constraint on [dbo].[ParametroValor]....';


GO
ALTER TABLE [dbo].[ParametroValor]
    ADD DEFAULT 'A' FOR [EstadoRegistro];


GO
PRINT N'Creating Default Constraint on [dbo].[ParametroValor]....';


GO
ALTER TABLE [dbo].[ParametroValor]
    ADD DEFAULT GETDATE() FOR [FechaCreacion];


GO
PRINT N'Creating Foreign Key on [Dbo].[ParametroSeccion]....';


GO
ALTER TABLE [Dbo].[ParametroSeccion]
    ADD FOREIGN KEY ([CodigoParametro]) REFERENCES [dbo].[Parametro] ([CodigoParametro]);


GO
PRINT N'Creating [dbo].[Usp_insert_cliente]...';


GO
CREATE PROCEDURE [dbo].[Usp_insert_cliente]
    @ClienteId BIGINT OUTPUT,
	@Nombre NVARCHAR(100),
	@Apellidos NVARCHAR(100),
	@Email NVARCHAR(100),
	@Telefono NVARCHAR(12),
	@Direccion NVARCHAR(500),
	@CodigoPais NVARCHAR(50),
	@CodigoDocumento NVARCHAR(50),
	@NumeroDocumento NVARCHAR(50)
AS
Begin
	INSERT INTO Cliente(Nombre,Apellidos,Email,Telefono,Direccion,CodigoPais,CodigoDocumento,NumeroDocumento)
	values (@Nombre,@Apellidos,@Email,@Telefono,@Direccion,@CodigoPais,@CodigoDocumento,@NumeroDocumento)
	
	SET @ClienteId= SCOPE_IDENTITY()
End
GO
PRINT N'Creating [dbo].[Usp_select_cliente]...';


GO
CREATE PROCEDURE [dbo].[Usp_select_cliente]
AS
BEGIN
	SELECT ClienteId,Nombre,Apellidos,Email,Telefono,Direccion,CodigoPais,CodigoDocumento,NumeroDocumento FROM Cliente
END
GO
PRINT N'Creating [dbo].[Usp_select_ParametroValor]...';


GO
CREATE PROCEDURE [dbo].[Usp_select_ParametroValor]
    @CodigoParametro INT ,
    @EstadoRegistro CHAR(1)
AS
Begin
    DECLARE @COLUMNAS NVARCHAR(MAX) = ''
    DECLARE @CONSULTA NVARCHAR(MAX) = ''
    DECLARE @CONDICION_ESTADO_REGISTRO NVARCHAR(100) = ''

    SELECT  @COLUMNAS = @COLUMNAS + ', ' + NOMBRE + ''
    FROM    PARAMETROSECCION
    WHERE   CODIGOPARAMETRO = @CodigoParametro
            AND ESTADOREGISTRO = 'A'

    SET @COLUMNAS = RIGHT(@COLUMNAS, LEN(@COLUMNAS) - 2)

    SET @ESTADOREGISTRO = ISNULL(@ESTADOREGISTRO, '')
    SET @CONDICION_ESTADO_REGISTRO = CASE WHEN @ESTADOREGISTRO = '' THEN ''
                                          ELSE 'AND PV.ESTADOREGISTRO = '
                                               + CHAR(39) + @ESTADOREGISTRO
                                               + CHAR(39)
                                     END

    SET @CONSULTA = N'SELECT ' + @COLUMNAS + ', EstadoRegistro
					FROM (SELECT PV.CODIGOVALOR, PS.NOMBRE, PV.VALOR, PV.ESTADOREGISTRO
					FROM PARAMETROVALOR PV, PARAMETROSECCION PS
					WHERE  ' 
							+ '
					 PV.CODIGOPARAMETRO = ' + CAST(@CODIGOPARAMETRO AS NVARCHAR) + ' '
							+ @CONDICION_ESTADO_REGISTRO + '
					AND PS.CODIGOPARAMETRO = ' + CAST(@CODIGOPARAMETRO AS NVARCHAR) + '
					AND PS.CODIGOSECCION = PV.CODIGOSECCION
					AND PV.ESTADOREGISTRO = ' + CHAR(39) + 'A' + CHAR(39) + ') AS ORIGEN
					PIVOT (MAX(VALOR) FOR NOMBRE IN (' + @COLUMNAS + ')) AS TABLA_PIVOTE
					ORDER BY ' + @COLUMNAS + ';'



    EXEC sp_executesql @CONSULTA
End
GO
PRINT N'Creating [dbo].[Usp_single_cliente]...';


GO
CREATE PROCEDURE [dbo].[Usp_single_cliente]
	  @ClienteId BIGINT
AS
		SELECT ClienteId,Nombre,Apellidos,Email,Telefono,Direccion,CodigoPais,CodigoDocumento,NumeroDocumento FROM Cliente
	where ClienteId = @ClienteId;
RETURN 0
GO
PRINT N'Creating [dbo].[Usp_update_cliente]...';


GO
CREATE PROCEDURE [dbo].[Usp_update_cliente]
    @ClienteId BIGINT,
	@Nombre NVARCHAR(100),
	@Apellidos NVARCHAR(100),
	@Email NVARCHAR(100),
	@Telefono NVARCHAR(12),
	@Direccion NVARCHAR(500),
	@CodigoPais NVARCHAR(50),
	@CodigoDocumento NVARCHAR(50),
	@NumeroDocumento NVARCHAR(50)
AS
	UPDATE Cliente
	set Nombre = @Nombre,
	    Apellidos = @Apellidos,
		Email = @Email,
		Telefono = @Telefono,
		Direccion = @Direccion,
		CodigoPais = @CodigoPais,
		CodigoDocumento =@CodigoDocumento,
		NumeroDocumento = @NumeroDocumento
		where ClienteId = @ClienteId;
RETURN 0
GO
-- Refactoring step to update target server with deployed transaction logs

IF OBJECT_ID(N'dbo.__RefactorLog') IS NULL
BEGIN
    CREATE TABLE [dbo].[__RefactorLog] (OperationKey UNIQUEIDENTIFIER NOT NULL PRIMARY KEY)
    EXEC sp_addextendedproperty N'microsoft_database_tools_support', N'refactoring log', N'schema', N'dbo', N'table', N'__RefactorLog'
END
GO
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '1f65d77e-9089-4778-9c0c-4e1ab3b19eee')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('1f65d77e-9089-4778-9c0c-4e1ab3b19eee')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'dcf86aa1-c834-4ab1-b341-17ab55e99c1f')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('dcf86aa1-c834-4ab1-b341-17ab55e99c1f')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'e5075e37-41cd-40cb-8e36-31fa7b847ca0')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('e5075e37-41cd-40cb-8e36-31fa7b847ca0')

GO

GO
INSERT [dbo].[PARAMETRO] ([CODIGOPARAMETRO], [NOMBRE], [DESCRIPCION], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, N'PAIS', N'LISTADO DE PAISES', N'A', N'ADMIN', CAST(0x0000AA3B00F9623D AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETRO] ([CODIGOPARAMETRO], [NOMBRE], [DESCRIPCION], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, N'TIPO DE DOCUMENTO', N'LISTADO DE DOCUMENTOS', N'A', N'ADMIN', CAST(0x0000AA3B00F9623D AS DateTime), N'LOCAL', NULL, NULL, NULL)

INSERT [dbo].[PARAMETROSECCION] ([CODIGOPARAMETRO], [CODIGOSECCION], [NOMBRE], [SOLOLECTURA], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 1, N'CodigoPais', 1, N'A', N'ADMIN', CAST(0x0000AA3B00FA797E AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROSECCION] ([CODIGOPARAMETRO], [CODIGOSECCION], [NOMBRE], [SOLOLECTURA], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 2, N'NombrePais', 1, N'A', N'ADMIN', CAST(0x0000AA3B00FA797E AS DateTime), N'LOCAL', NULL, NULL, NULL)

INSERT [dbo].[PARAMETROSECCION] ([CODIGOPARAMETRO], [CODIGOSECCION], [NOMBRE], [SOLOLECTURA], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 3, N'CodigoDocumento', 1, N'A', N'ADMIN', CAST(0x0000AA3B00FA797E AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROSECCION] ([CODIGOPARAMETRO], [CODIGOSECCION], [NOMBRE], [SOLOLECTURA], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 4, N'NombreDocumento', 1, N'A', N'ADMIN', CAST(0x0000AA3B00FA797E AS DateTime), N'LOCAL', NULL, NULL, NULL)

INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 1, 1, N'100', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 2, 1, N'Argentina', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 1, 2, N'101', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 2, 2, N'Colombia', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 1, 3, N'102', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 2, 3, N'Chile', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 1, 4, N'103', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (1, 2, 4, N'Costa Rica', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)


INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 3, 3, N'200', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 4, 3, N'DNI', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 3, 4, N'201', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 4, 4, N'RUC', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 3, 4, N'202', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 4, 4, N'Carnet Extranjería', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 3, 4, N'203', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)
INSERT [dbo].[PARAMETROVALOR] ([CODIGOPARAMETRO], [CODIGOSECCION], [CODIGOVALOR], [VALOR], [ESTADOREGISTRO], [USUARIOCREACION], [FECHACREACION], [TERMINALCREACION], [USUARIOMODIFICACION], [FECHAMODIFICACION], [TERMINALMODIFICACION]) VALUES (2, 4, 4, N'Passporte', N'A', N'ADMIN', CAST(0x0000AA3B00FB9732 AS DateTime), N'LOCAL', NULL, NULL, NULL)

GO

GO
DECLARE @VarDecimalSupported AS BIT;

SELECT @VarDecimalSupported = 0;

IF ((ServerProperty(N'EngineEdition') = 3)
    AND (((@@microsoftversion / power(2, 24) = 9)
          AND (@@microsoftversion & 0xffff >= 3024))
         OR ((@@microsoftversion / power(2, 24) = 10)
             AND (@@microsoftversion & 0xffff >= 1600))))
    SELECT @VarDecimalSupported = 1;

IF (@VarDecimalSupported > 0)
    BEGIN
        EXECUTE sp_db_vardecimal_storage_format N'$(DatabaseName)', 'ON';
    END


GO
PRINT N'Update complete.'
GO
